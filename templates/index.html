<!DOCTYPE html>
<html>
<head>
    <title>BnuuyBot Chat</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <h1>BunnyBot Chat</h1>
    
    <div class="container">
        <div class="sidebar">
            <div id="status">
                <div>
                    Transcription: 
                    <span class="status-indicator {% if is_active %}status-active{% else %}status-inactive{% endif %}"></span>
                    {% if is_active %}Active{% else %}Inactive{% endif %}
                </div>
                <div>
                    Timer: 
                    <span class="status-indicator {% if timer_active %}status-active{% else %}status-inactive{% endif %}"></span>
                    {% if timer_active %}Active{% else %}Inactive{% endif %}
                </div>
            </div>
            
            <div class="sidebar-section">
                <form id="start-form" action="/start" method="post">
                    <button type="submit" class="btn-success" {% if is_active %}disabled{% endif %}>
                        Start Listening
                    </button>
                </form>
                
                <form id="stop-form" action="/stop" method="post">
                    <button type="submit" class="btn-danger" {% if not is_active %}disabled{% endif %}>
                        Stop Listening
                    </button>
                </form>
            </div>
            
            <div class="sidebar-section">
                <form id="start-timer-form" action="/start_timer" method="post">
                    <button type="submit" class="btn-info" {% if timer_active %}disabled{% endif %}>
                        Start Timer
                    </button>
                </form>
                
                <form id="stop-timer-form" action="/stop_timer" method="post">
                    <button type="submit" class="btn-warning" {% if not timer_active %}disabled{% endif %}>
                        Stop Timer
                    </button>
                </form>
            </div>
            
            <div class="sidebar-section">
                <form id="clear-form" action="/clear" method="post">
                    <button type="submit" class="btn-primary">
                        Clear History
                    </button>
                </form>
                
                <form id="end-chat-form" action="/end_chat" method="post">
                    <button type="submit" class="btn-secondary">
                        End Chat
                    </button>
                </form>
            </div>
            
            <div class="sidebar-section">
                <form id="user-id-form" action="/set_user_id" method="post">
                    <label for="user_id">User ID:</label>
                    <input type="text" id="user_id" name="user_id" value="{{ default_user_id }}">
                    <button type="submit" class="btn-dark">
                        Set User
                    </button>
                </form>
            </div>
            <!-- for testing -->
            <div class="sidebar-section">
                <form>
                    <button type="button" onclick="addTestSystemMessage()">Add Test System Message</button>
                </form>
            </div>
        </div>

        <div class="main-content">
            <div id="conversation">
                {% if history or llm_responses %}
                    <!-- We'll build this dynamically with JavaScript -->
                {% else %}
                    <p>No conversation history yet. Start speaking to begin.</p>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>